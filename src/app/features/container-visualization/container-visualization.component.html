<div class="container-visualization">
  <h1 class="title">{{ shipData?.title }}</h1>

  <div class="containers-list" *ngIf="shipData">
    <div class="container-card" *ngFor="let container of shipData.containers">
      <!-- Container Header -->
      <div class="container-header">
        <div class="container-info">
          <a href="#" class="container-link">
            {{ container.ship }} | {{ container.name }}
          </a>
          <div class="metadata">
            widthindex {{ container.widthindexStart }} Mcm - {{ container.widthindexEnd }} Mcm | Width {{ container.widthMcm }} Cm - {{ container.widthUtilization }}% utilization | Weight {{ container.weightKg }} Kg - {{ container.weightUtilization }}% utilization
          </div>
        </div>
        <div class="controls">
          <button class="icon-btn" (click)="onDownload(container)" title="Download">
            ↓
          </button>
          <button class="icon-btn" (click)="onRefresh()" title="Refresh">
            ↻
          </button>
          <select class="filter-select">
            <option>None</option>
            <option selected>All</option>
          </select>
        </div>
      </div>

      <!-- Container Bar -->
      <div
        class="container-bar-wrapper"
        (dragover)="onDragOver($event)"
        (drop)="onDrop($event, container.id)"
      >
        <div class="position-label top">{{ container.items.length > 0 ? container.items[0].position : 0 }}</div>
        
        <div class="container-bar">
          <div
            class="item"
            *ngFor="let item of container.items"
            [ngStyle]="getItemPosition(item, container)"
            draggable="true"
            (dragstart)="onDragStart($event, container.id, item)"
          >
            <div class="item-content">
              <div class="item-name">{{ item.name }}</div>
              <div class="item-detail">{{ item.dimensionMcm }} [Mcm]</div>
              <div class="item-detail">{{ item.weightKg }} [Kg]</div>
              <div class="item-destination">{{ item.destination }}</div>
            </div>
          </div>
        </div>

        <div class="position-label bottom">{{ container.items.length > 0 ? container.items[0].position - 750 : 0 }}</div>
      </div>
    </div>
  </div>
</div>
